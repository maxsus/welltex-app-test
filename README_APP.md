
## Требования
1. PHP 7.2
2. MySQL 8. Дамп БД в корне проекта, просто на всякий.
3. composer install
4. Заполнить .env для подключения к БД. К корне есть .env.example.

## Что не реализовал:
1. Не смог придумать как по нормальному использоавть функционал форм. Прочитал, что она должна отталкиваться от модели, т.к. в ней находится валидация. При создании заказа нужно писать данные в том числе и в ItemOrder, поэтому на валидацию юзера, товаров и самого заказа в одном валидаторе формы у меня не хватило толку.
2. Не смог придумать как написать динамику на js. Как по мне, тут особо нечего делать, во всяком случае при моей реализации формы оформления заказа. Много раз ее переделывал в большей степени для того, чтобы в контроллер оформления заказа удобней передавать. В процессе реализации разных вариантов подключал js файл в assets/AppAsset.php
3. На внедрение регистрации не хватило времени, а просто копипасту из интернета вставлять не захотел. А так, пожразумевалась переделка модели User, его контроллера, создание формы, переделка текущих.
4. По хорошему бы в контроллерах оформления заказа создать отдельный валидатор для проверки входящих параметров, и возврат данных через ресурс. Но В yii2 валидация идет через модель (как я понял), а возвращать мне кроме сообщений нечего, то копать в этом направлении не стал. 
5. Есть лишние папки во view, которые создались через Gii. Не стал удалять, как и часть дефолтных фалов.
6. По хорошему бы обернуть код в контролеерах в проверки ошибок, но я там и так много условий в процессе выполенения проверяю.

## Чему уделил внимание
1. Создал .env файл с подключением к БД
2. Модели и контроллеры сделал через Gii, потом внес в них же корректированки под свои нужны.
3. Вынес логику создания и удаления заказа в сервис.
4. Оформление заказа обернул в транзакцию, т.к. запись о заказе затрагивает две таблицы.
5. Т.к. в дефлотной базе уже была реализация flash сообщений, то сделал для них трейт. Удобно было через них проверять алгоритм на ошибки, т.к. xdebug было лень на PHP 7.2. настраивать. 
6. Долго делал вьюшки. Думал над тем как сделать удобнее. В целом, в них ничего интересного нет, но время потратил достаточно.
7. Изначально хотел надобавлять ко всем записям в БД created_at, updated_at, soft delete. В laravel это делается прямо в миграциях. Тут чуть сложнее, в моделях вроде. Попробовал, но не стал усложнять по итогу.
8. Изначально думал над тем, чтобы присваивать товары к заказу без указания количества, т.е. через повторное добавление товара по его количеству. В таблице item_order было бы как в примере ниже. Отказался из-за усложнения реализации, решил сэкономить время, хотя такая реализация, субъективно, более правильная, т.к. на два товара в одном заказе, с одиним и тем же id может применяться разная скидка, например, или любой другой модификатор. Тут такого требования к бизнес логики не было, поэтому делать не стал. 
```
order_id | item_id
1        | 3
1        | 2
1        | 2
2        | 5
2        | 5
2        | 1
```

## Итого
Не особо доволен своей работой. Давно пободным не занимался, да и делать можно бесконечно долго, переделывая все по нескольку раз.
Сложность в первую очередь с планированием реализации задачи, т.к. когда ничего не знаешь, уходишь куда-то не туда. Пытался и в api, и во vue, но в итоге от всего отказался. С 4 попытки сделал примерно. Потратил много - 12 часов, если по трекеру судить.


## Консольные команды (себе на память)

```
composer create-project --prefer-dist yiisoft/yii2-app-basic welltex-app-test
composer require vlucas/phpdotenv

yii migrate/create create_user_table
yii migrate/create create_item_table
yii migrate/create create_order_table
yii migrate/create create_item_order_table

yii migrate
```

Ссылка на генератор:

```
http://welltex-app-test/web/?r=gii
```